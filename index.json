[{"categories":["Hugo"],"content":"1 Google Analytics Google分析（Google Analytics）是一个由Google所提供的网站流量统计服务。Google 分析（Analytics）现在是互联网上使用最广泛的网络分析服务。 ","date":"2022-02-28","objectID":"/google_analytics/:1:0","tags":["Hugo"],"title":"Hugo 配置Google Analytics和Search Console","uri":"/google_analytics/"},{"categories":["Hugo"],"content":"账号注册 在google Analytics上完成账号注册。 ","date":"2022-02-28","objectID":"/google_analytics/:1:1","tags":["Hugo"],"title":"Hugo 配置Google Analytics和Search Console","uri":"/google_analytics/"},{"categories":["Hugo"],"content":"创建网络媒体资源 在【管理】【创建网络媒体资源】下，点击【显示高级选项】。 开启【创建 Universal Analytics 媒体资源】，填写网站网址，选择【仅创建 Universal Analytics 媒体资源】， 完成网络媒体资源创建。 ","date":"2022-02-28","objectID":"/google_analytics/:1:2","tags":["Hugo"],"title":"Hugo 配置Google Analytics和Search Console","uri":"/google_analytics/"},{"categories":["Hugo"],"content":"获取跟踪信息 获取跟踪信息的导航为：【管理】【跟踪信息】【跟踪代码】。有效跟踪信息如下： 跟踪id 全局网站代码 (gtag.js) ","date":"2022-02-28","objectID":"/google_analytics/:1:3","tags":["Hugo"],"title":"Hugo 配置Google Analytics和Search Console","uri":"/google_analytics/"},{"categories":["Hugo"],"content":"2 hugo配置跟踪信息 需要配置的内容： config.toml中配置跟踪id 在每个网页的index.html中的head标签里添加全局网站代码（gtag.js） ","date":"2022-02-28","objectID":"/google_analytics/:2:0","tags":["Hugo"],"title":"Hugo 配置Google Analytics和Search Console","uri":"/google_analytics/"},{"categories":["Hugo"],"content":"配置跟踪id 在config.toml中找到google Analytics，并赋值为跟踪id。 googleAnalytics = \"UA-XXXXXXXXX-1\" 其中的UA-XXXXXXXXX-1需要替换成对应资源的跟踪id。 ","date":"2022-02-28","objectID":"/google_analytics/:2:1","tags":["Hugo"],"title":"Hugo 配置Google Analytics和Search Console","uri":"/google_analytics/"},{"categories":["Hugo"],"content":"配置gtag.js 在基础模板页中添加全局网站代码（gtag.js）。配置参考：Configure Google Analytics。 在项目根目录下新建layouts,在新增一个_internal/google_analytics_async.html，内容为全局网站代码（gtag.js）。 hugo规定内间模板的文件目录优先级大于主题目录，这样可以不用去更改主题下的配置模板。 这里已知有两种情况： 基础模板通过baseof.html配置。 基础模板通过head.html配置。 如果是通过baseof.html配置，需复制主题下的/themes/xxx/layouts/_default到根目录下的layouts下，不同的主题的_default下的文件可能略有不同。 +---layouts | +---_default | | | baseof.html | | | section.html | | | single.html | | | single.md | | | summary.html | \\---_internal | google_analytics_async.html 如果是head.html配置，head.html应该在/themes/xxx/layouts/partials/下，所以根目录下的layouts文件结果如下; +---layouts | +---partials | | | head.html | \\---_internal | google_analytics_async.html 无论是baseof.html还是head.html，都是在head标签内添加内容： {{- if not .Site.IsServer }} {{ template \"_internal/google_analytics_async.html\" . }} {{- end }} 验证gtag.js的内容是否成功插入，在项目根目录下执行hugo或者hugo --gc。会在根目录下会有public文件生成。查看文件夹下的index.html的head标签内是否成功插入gtag.js的内容。 ","date":"2022-02-28","objectID":"/google_analytics/:2:2","tags":["Hugo"],"title":"Hugo 配置Google Analytics和Search Console","uri":"/google_analytics/"},{"categories":["Hugo"],"content":"3 Search Console 在Search Console添加资源并提交验证。选择【网络前缀】，因为已经配置过Google Analytics,所以会自动通过谷歌分析完成所有权验证。 ","date":"2022-02-28","objectID":"/google_analytics/:3:0","tags":["Hugo"],"title":"Hugo 配置Google Analytics和Search Console","uri":"/google_analytics/"},{"categories":["Hugo"],"content":"4 提交站点地图 在Search Console中【站点地图】，添加新的站点地图，hugo会自动生成sitemap.xml，直接填写并提交即可。我提交后的状态是无法获取，暂未解决。但是可以先通过网址检查，并请求编入索引。然后通过site:example.com可以查询是否被成功索引。 ","date":"2022-02-28","objectID":"/google_analytics/:4:0","tags":["Hugo"],"title":"Hugo 配置Google Analytics和Search Console","uri":"/google_analytics/"},{"categories":["Git"],"content":"1 网络代理 git下载代码的时候可以通过https或ssh。有时候拉取GitHub上的代码因为网络原因出现失败，我们可以通过配置网络代理解决。 二者在提交代码时的认证方式不同： https：账号和密码认证。 ssh：证书认证。 ","date":"2022-02-24","objectID":"/git_proxy/:1:0","tags":["Git"],"title":"Git 网络代理","uri":"/git_proxy/"},{"categories":["Git"],"content":"HTTPS git config --global http.proxy \"http://127.0.0.1:3128\" git config --global https.proxy \"http://127.0.0.1:3128\" 以上配置生效会在用户目录下的.gitconfig文件中体现。 [user] name = huangjingwei email = example.com [http] proxy = http://127.0.0.1:3128 [https] proxy = http://127.0.0.1:3128 ","date":"2022-02-24","objectID":"/git_proxy/:1:1","tags":["Git"],"title":"Git 网络代理","uri":"/git_proxy/"},{"categories":["Git"],"content":"SSH 在用户目录下，新建.ssh/config。 Host github.com User git IdentityFile \"C:\\Users\\your-username\\.ssh\\id_rsa\" ProxyCommand connect.exe -H 127.0.0.1:3128 %h %p ","date":"2022-02-24","objectID":"/git_proxy/:1:2","tags":["Git"],"title":"Git 网络代理","uri":"/git_proxy/"},{"categories":["Docker"],"content":"1 Docker Docker是一个开放平台，可用于容器镜像的开发、交付和运行。 Docker名词一般是泛指。一般会代指Docker引擎(Docker Engine)或Docker注册中心(Docker registry)。 我们这边讨论的是Docker引擎。其主要有3部分组成： Docker守护进程(Docker daemon / dockerd)。 Docker Engine API。 Docker 客户端。 ","date":"2021-11-07","objectID":"/docker_proxy/:1:0","tags":["Docker"],"title":"Docker 安装和网络代理","uri":"/docker_proxy/"},{"categories":["Docker"],"content":"2 Docker的安装卸载 Docker的版本自17.03后分为CE(Community Edition)和EE(Enterprise Edition)，个人使用安装CE版本。 ","date":"2021-11-07","objectID":"/docker_proxy/:2:0","tags":["Docker"],"title":"Docker 安装和网络代理","uri":"/docker_proxy/"},{"categories":["Docker"],"content":"推荐安装方法 Linux的发行版一般会自带docker的软件包或者下载.deb文件手动安装， 但是本文推荐的安装方法是通过apt包管理工具安装，参照官网安装向导。 安装之前建议先卸载旧版本： $ sudo apt-get remove docker docker-engine docker.io containerd runc 添加使用HTTPS传输的软件包和CA证书： $ sudo apt-get update $ sudo apt-get install \\ ca-certificates \\ curl \\ gnupg \\ lsb-release 添加软件源需要的GPG密钥： $ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add - # 如果是国内源： $ curl -fsSL https://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo apt-key add - 配置仓库： $ sudo add-apt-repository \\ \"deb [arch=$(dpkg --print-architecture)https://download.docker.com/linux/ubuntu \\ $(lsb_release -cs)stable\" 或者直接在/etc/apt/sources.list.d/创建一个docker.list文件,添加上式中的引号中的内容， 并修改内容中修改架构和发行版名称。 执行安装： $ sudo apt-get update $ sudo apt-get install docker-ce docker-ce-cli containerd.io 建立docker用户组： $ sudo groupadd docker $ sudo usermod -aG docker $USER 如果一切顺利的话，就安装成功了。 ","date":"2021-11-07","objectID":"/docker_proxy/:2:1","tags":["Docker"],"title":"Docker 安装和网络代理","uri":"/docker_proxy/"},{"categories":["Docker"],"content":"卸载方法 卸载Docker Engine： $ sudo apt-get purge -y docker-engine docker docker-ce docker-ce-cli containerd.io $ sudo apt-get autoremove -y --purge docker-engine docker docker-ce docker-ce-cli containerd.io 以上的命令不会删除主机上的镜像、容器、卷和用户创建的配置文件等，如需清理： $ sudo rm -rf /var/lib/docker /var/lib/containerd /etc/docker $ sudo rm /etc/apparmor.d/docker $ sudo groupdel docker $ sudo rm -rf /var/run/docker.sock ","date":"2021-11-07","objectID":"/docker_proxy/:2:2","tags":["Docker"],"title":"Docker 安装和网络代理","uri":"/docker_proxy/"},{"categories":["Docker"],"content":"3 网络代理配置 在公司经常需要挂代理才可以正常访问互联网。如果是这种情况，需要为Docker配置代理。 在Docker的使用中，需要访问外网的场景一般有： dockerd代理配置 Container代理配置 docker build代理配置 下文主要参考：Docker的三种网络代理配置。 ","date":"2021-11-07","objectID":"/docker_proxy/:3:0","tags":["Docker"],"title":"Docker 安装和网络代理","uri":"/docker_proxy/"},{"categories":["Docker"],"content":"dockerd代理配置 当你执行docker login、docker push、docker pull时，实际上是在和docker-client交互， 这时候docker-client操作dockerd去访问外网的镜像仓库时，就会有相关的API发出，这时候需要给dockerd去配置代理。 docker受到systemd的管控，所以需要修改的是systemd的配置。 sudo mkdir -p /etc/systemd/system/docker.service.d sudo touch /etc/systemd/system/docker.service.d/proxy.conf 这里新创建的配置文件的命名只要符合*.conf的形式即可。添加内容如下： [Service] Environment=\"HTTP_PROXY=http://\u003cproxy-addr\u003e:\u003cproxy-port\u003e\" Environment=\"HTTPS_PROXY=http://\u003cproxy-addr\u003e:\u003cproxy-port\u003e\" Environment=\"NO_PROXY=localhost,127.0.0.1,docker-registry.somecorporation.com\" 其中的代理要换成可用的免密代理。 生效条件 需要重启dockerd才可生效。 重启指令： $ sudo systemctl daemon-reload $ sudo systemctl restart docker ","date":"2021-11-07","objectID":"/docker_proxy/:3:1","tags":["Docker"],"title":"Docker 安装和网络代理","uri":"/docker_proxy/"},{"categories":["Docker"],"content":"Container代理配置 1. 配置文件 当容器运行时，容器内的运用需要代理访问时，需要配置~/.docker/config.json，当然只生效在Docker的17.07及其以后版本。 {\"proxies\":{\"default\":{\"httpProxy\": \"http://\u003cproxy-addr\u003e:\u003cproxy-port\u003e\",\"httpsProxy\": \"http://\u003cproxy-addr\u003e:\u003cproxy-port\u003e\",\"noProxy\": \"localhost,127.0.0.1,docker-registry.somecorporation.com\"}}} 以上的配置可以一劳永逸。 2. 环境变量 当然，还有一种是在运行容器时通过环境变量的形式注入，命令是-e或者--env。 注意 注入的代理根据真实需要，如容器是基于ubuntu系统的应该配置http_proxy、https_proxy、no_proxy等。 生效条件 对已经启动的容器无效，对配置后启动的容器立即生效。 ","date":"2021-11-07","objectID":"/docker_proxy/:3:2","tags":["Docker"],"title":"Docker 安装和网络代理","uri":"/docker_proxy/"},{"categories":["Docker"],"content":"docker build代理配置 通过docker build构建镜像，是启动容器并逐层构建。但是上文中的配置文件对其无效。 Dockerfile也可以设置环境变量，有ENV和ARG，这两者的作用一致，但是通过ENV设置的环境变量会一并带到生成的镜像中。 ARG则不会，只在构建的阶段有效。 Dockerfile的ARG和docker build的--build-arg是一致的， 建议在构建时通过--build-arg \u003cvarname\u003e=\u003cvalue\u003e参数来指定或重设置这些变量的值。 所以，docker build配置代理： docker build . \\ --build-arg \"http_proxy=http://\u003cproxy-addr\u003e:\u003cproxy-port\u003e\" \\ --build-arg \"https_proxy=http://\u003cproxy-addr\u003e:\u003cproxy-port\u003e\" \\ --build-arg \"no_proxy=localhost,127.0.0.1,docker-registry.somecorporation.com\" \\ -t your/image:tag 同样，由于是通过环境变量来配置代理，配置生效的环境变量应该要符合实际镜像的要求。 注意 如果代理使用的是localhost:3128这类，必须加上--network host代理才能生效。 或者直接配置代理的外部IP。 生效条件 执行docker build构建镜像时立即生效。 ","date":"2021-11-07","objectID":"/docker_proxy/:3:3","tags":["Docker"],"title":"Docker 安装和网络代理","uri":"/docker_proxy/"},{"categories":null,"content":"这世界，来都来了。 学习做事。 刻意练习 自我迭代 学习做人。 辩证 接纳 适用人群：普通人。 ","date":"2021-11-06","objectID":"/about/:0:0","tags":null,"title":"向右看齐","uri":"/about/"}]